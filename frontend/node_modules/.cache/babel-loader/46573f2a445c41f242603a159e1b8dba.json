{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parseBackgroundImage = exports.parseBackground = exports.calculateBackgroundRepeatPath = exports.calculateBackgroundPosition = exports.calculateBackgroungPositioningArea = exports.calculateBackgroungPaintingArea = exports.calculateGradientBackgroundSize = exports.calculateBackgroundSize = exports.BACKGROUND_ORIGIN = exports.BACKGROUND_CLIP = exports.BACKGROUND_SIZE = exports.BACKGROUND_REPEAT = undefined;\n\nvar _Color = require('../Color');\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nvar _Length = require('../Length');\n\nvar _Length2 = _interopRequireDefault(_Length);\n\nvar _Size = require('../drawing/Size');\n\nvar _Size2 = _interopRequireDefault(_Size);\n\nvar _Vector = require('../drawing/Vector');\n\nvar _Vector2 = _interopRequireDefault(_Vector);\n\nvar _Bounds = require('../Bounds');\n\nvar _padding = require('./padding');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar BACKGROUND_REPEAT = exports.BACKGROUND_REPEAT = {\n  REPEAT: 0,\n  NO_REPEAT: 1,\n  REPEAT_X: 2,\n  REPEAT_Y: 3\n};\nvar BACKGROUND_SIZE = exports.BACKGROUND_SIZE = {\n  AUTO: 0,\n  CONTAIN: 1,\n  COVER: 2,\n  LENGTH: 3\n};\nvar BACKGROUND_CLIP = exports.BACKGROUND_CLIP = {\n  BORDER_BOX: 0,\n  PADDING_BOX: 1,\n  CONTENT_BOX: 2\n};\nvar BACKGROUND_ORIGIN = exports.BACKGROUND_ORIGIN = BACKGROUND_CLIP;\nvar AUTO = 'auto';\n\nvar BackgroundSize = function BackgroundSize(size) {\n  _classCallCheck(this, BackgroundSize);\n\n  switch (size) {\n    case 'contain':\n      this.size = BACKGROUND_SIZE.CONTAIN;\n      break;\n\n    case 'cover':\n      this.size = BACKGROUND_SIZE.COVER;\n      break;\n\n    case 'auto':\n      this.size = BACKGROUND_SIZE.AUTO;\n      break;\n\n    default:\n      this.value = new _Length2.default(size);\n  }\n};\n\nvar calculateBackgroundSize = exports.calculateBackgroundSize = function calculateBackgroundSize(backgroundImage, image, bounds) {\n  var width = 0;\n  var height = 0;\n  var size = backgroundImage.size;\n\n  if (size[0].size === BACKGROUND_SIZE.CONTAIN || size[0].size === BACKGROUND_SIZE.COVER) {\n    var targetRatio = bounds.width / bounds.height;\n    var currentRatio = image.width / image.height;\n    return targetRatio < currentRatio !== (size[0].size === BACKGROUND_SIZE.COVER) ? new _Size2.default(bounds.width, bounds.width / currentRatio) : new _Size2.default(bounds.height * currentRatio, bounds.height);\n  }\n\n  if (size[0].value) {\n    width = size[0].value.getAbsoluteValue(bounds.width);\n  }\n\n  if (size[0].size === BACKGROUND_SIZE.AUTO && size[1].size === BACKGROUND_SIZE.AUTO) {\n    height = image.height;\n  } else if (size[1].size === BACKGROUND_SIZE.AUTO) {\n    height = width / image.width * image.height;\n  } else if (size[1].value) {\n    height = size[1].value.getAbsoluteValue(bounds.height);\n  }\n\n  if (size[0].size === BACKGROUND_SIZE.AUTO) {\n    width = height / image.height * image.width;\n  }\n\n  return new _Size2.default(width, height);\n};\n\nvar calculateGradientBackgroundSize = exports.calculateGradientBackgroundSize = function calculateGradientBackgroundSize(backgroundImage, bounds) {\n  var size = backgroundImage.size;\n  var width = size[0].value ? size[0].value.getAbsoluteValue(bounds.width) : bounds.width;\n  var height = size[1].value ? size[1].value.getAbsoluteValue(bounds.height) : size[0].value ? width : bounds.height;\n  return new _Size2.default(width, height);\n};\n\nvar AUTO_SIZE = new BackgroundSize(AUTO);\n\nvar calculateBackgroungPaintingArea = exports.calculateBackgroungPaintingArea = function calculateBackgroungPaintingArea(curves, clip) {\n  switch (clip) {\n    case BACKGROUND_CLIP.BORDER_BOX:\n      return (0, _Bounds.calculateBorderBoxPath)(curves);\n\n    case BACKGROUND_CLIP.PADDING_BOX:\n    default:\n      return (0, _Bounds.calculatePaddingBoxPath)(curves);\n  }\n};\n\nvar calculateBackgroungPositioningArea = exports.calculateBackgroungPositioningArea = function calculateBackgroungPositioningArea(backgroundOrigin, bounds, padding, border) {\n  var paddingBox = (0, _Bounds.calculatePaddingBox)(bounds, border);\n\n  switch (backgroundOrigin) {\n    case BACKGROUND_ORIGIN.BORDER_BOX:\n      return bounds;\n\n    case BACKGROUND_ORIGIN.CONTENT_BOX:\n      var paddingLeft = padding[_padding.PADDING_SIDES.LEFT].getAbsoluteValue(bounds.width);\n\n      var paddingRight = padding[_padding.PADDING_SIDES.RIGHT].getAbsoluteValue(bounds.width);\n\n      var paddingTop = padding[_padding.PADDING_SIDES.TOP].getAbsoluteValue(bounds.width);\n\n      var paddingBottom = padding[_padding.PADDING_SIDES.BOTTOM].getAbsoluteValue(bounds.width);\n\n      return new _Bounds.Bounds(paddingBox.left + paddingLeft, paddingBox.top + paddingTop, paddingBox.width - paddingLeft - paddingRight, paddingBox.height - paddingTop - paddingBottom);\n\n    case BACKGROUND_ORIGIN.PADDING_BOX:\n    default:\n      return paddingBox;\n  }\n};\n\nvar calculateBackgroundPosition = exports.calculateBackgroundPosition = function calculateBackgroundPosition(position, size, bounds) {\n  return new _Vector2.default(position[0].getAbsoluteValue(bounds.width - size.width), position[1].getAbsoluteValue(bounds.height - size.height));\n};\n\nvar calculateBackgroundRepeatPath = exports.calculateBackgroundRepeatPath = function calculateBackgroundRepeatPath(background, position, size, backgroundPositioningArea, bounds) {\n  var repeat = background.repeat;\n\n  switch (repeat) {\n    case BACKGROUND_REPEAT.REPEAT_X:\n      return [new _Vector2.default(Math.round(bounds.left), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(size.height + backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left), Math.round(size.height + backgroundPositioningArea.top + position.y))];\n\n    case BACKGROUND_REPEAT.REPEAT_Y:\n      return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.height + bounds.top))];\n\n    case BACKGROUND_REPEAT.NO_REPEAT:\n      return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y + size.height)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y + size.height))];\n\n    default:\n      return [new _Vector2.default(Math.round(bounds.left), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(bounds.left), Math.round(bounds.height + bounds.top))];\n  }\n};\n\nvar parseBackground = exports.parseBackground = function parseBackground(style, resourceLoader) {\n  return {\n    backgroundColor: new _Color2.default(style.backgroundColor),\n    backgroundImage: parseBackgroundImages(style, resourceLoader),\n    backgroundClip: parseBackgroundClip(style.backgroundClip),\n    backgroundOrigin: parseBackgroundOrigin(style.backgroundOrigin)\n  };\n};\n\nvar parseBackgroundClip = function parseBackgroundClip(backgroundClip) {\n  switch (backgroundClip) {\n    case 'padding-box':\n      return BACKGROUND_CLIP.PADDING_BOX;\n\n    case 'content-box':\n      return BACKGROUND_CLIP.CONTENT_BOX;\n  }\n\n  return BACKGROUND_CLIP.BORDER_BOX;\n};\n\nvar parseBackgroundOrigin = function parseBackgroundOrigin(backgroundOrigin) {\n  switch (backgroundOrigin) {\n    case 'padding-box':\n      return BACKGROUND_ORIGIN.PADDING_BOX;\n\n    case 'content-box':\n      return BACKGROUND_ORIGIN.CONTENT_BOX;\n  }\n\n  return BACKGROUND_ORIGIN.BORDER_BOX;\n};\n\nvar parseBackgroundRepeat = function parseBackgroundRepeat(backgroundRepeat) {\n  switch (backgroundRepeat.trim()) {\n    case 'no-repeat':\n      return BACKGROUND_REPEAT.NO_REPEAT;\n\n    case 'repeat-x':\n    case 'repeat no-repeat':\n      return BACKGROUND_REPEAT.REPEAT_X;\n\n    case 'repeat-y':\n    case 'no-repeat repeat':\n      return BACKGROUND_REPEAT.REPEAT_Y;\n\n    case 'repeat':\n      return BACKGROUND_REPEAT.REPEAT;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    console.error('Invalid background-repeat value \"' + backgroundRepeat + '\"');\n  }\n\n  return BACKGROUND_REPEAT.REPEAT;\n};\n\nvar parseBackgroundImages = function parseBackgroundImages(style, resourceLoader) {\n  var sources = parseBackgroundImage(style.backgroundImage).map(function (backgroundImage) {\n    if (backgroundImage.method === 'url') {\n      var key = resourceLoader.loadImage(backgroundImage.args[0]);\n      backgroundImage.args = key ? [key] : [];\n    }\n\n    return backgroundImage;\n  });\n  var positions = style.backgroundPosition.split(',');\n  var repeats = style.backgroundRepeat.split(',');\n  var sizes = style.backgroundSize.split(',');\n  return sources.map(function (source, index) {\n    var size = (sizes[index] || AUTO).trim().split(' ').map(parseBackgroundSize);\n    var position = (positions[index] || AUTO).trim().split(' ').map(parseBackgoundPosition);\n    return {\n      source: source,\n      repeat: parseBackgroundRepeat(typeof repeats[index] === 'string' ? repeats[index] : repeats[0]),\n      size: size.length < 2 ? [size[0], AUTO_SIZE] : [size[0], size[1]],\n      position: position.length < 2 ? [position[0], position[0]] : [position[0], position[1]]\n    };\n  });\n};\n\nvar parseBackgroundSize = function parseBackgroundSize(size) {\n  return size === 'auto' ? AUTO_SIZE : new BackgroundSize(size);\n};\n\nvar parseBackgoundPosition = function parseBackgoundPosition(position) {\n  switch (position) {\n    case 'bottom':\n    case 'right':\n      return new _Length2.default('100%');\n\n    case 'left':\n    case 'top':\n      return new _Length2.default('0%');\n\n    case 'auto':\n      return new _Length2.default('0');\n  }\n\n  return new _Length2.default(position);\n};\n\nvar parseBackgroundImage = exports.parseBackgroundImage = function parseBackgroundImage(image) {\n  var whitespace = /^\\s$/;\n  var results = [];\n  var args = [];\n  var method = '';\n  var quote = null;\n  var definition = '';\n  var mode = 0;\n  var numParen = 0;\n\n  var appendResult = function appendResult() {\n    var prefix = '';\n\n    if (method) {\n      if (definition.substr(0, 1) === '\"') {\n        definition = definition.substr(1, definition.length - 2);\n      }\n\n      if (definition) {\n        args.push(definition.trim());\n      }\n\n      var prefix_i = method.indexOf('-', 1) + 1;\n\n      if (method.substr(0, 1) === '-' && prefix_i > 0) {\n        prefix = method.substr(0, prefix_i).toLowerCase();\n        method = method.substr(prefix_i);\n      }\n\n      method = method.toLowerCase();\n\n      if (method !== 'none') {\n        results.push({\n          prefix: prefix,\n          method: method,\n          args: args\n        });\n      }\n    }\n\n    args = [];\n    method = definition = '';\n  };\n\n  image.split('').forEach(function (c) {\n    if (mode === 0 && whitespace.test(c)) {\n      return;\n    }\n\n    switch (c) {\n      case '\"':\n        if (!quote) {\n          quote = c;\n        } else if (quote === c) {\n          quote = null;\n        }\n\n        break;\n\n      case '(':\n        if (quote) {\n          break;\n        } else if (mode === 0) {\n          mode = 1;\n          return;\n        } else {\n          numParen++;\n        }\n\n        break;\n\n      case ')':\n        if (quote) {\n          break;\n        } else if (mode === 1) {\n          if (numParen === 0) {\n            mode = 0;\n            appendResult();\n            return;\n          } else {\n            numParen--;\n          }\n        }\n\n        break;\n\n      case ',':\n        if (quote) {\n          break;\n        } else if (mode === 0) {\n          appendResult();\n          return;\n        } else if (mode === 1) {\n          if (numParen === 0 && !method.match(/^url$/i)) {\n            args.push(definition.trim());\n            definition = '';\n            return;\n          }\n        }\n\n        break;\n    }\n\n    if (mode === 0) {\n      method += c;\n    } else {\n      definition += c;\n    }\n  });\n  appendResult();\n  return results;\n};","map":{"version":3,"sources":["/Users/ChathushkaRodrigo/Desktop/ITP Project/ZooMelaka-Management-System/frontend/node_modules/react-to-pdf/node_modules/html2canvas/dist/npm/parsing/background.js"],"names":["Object","defineProperty","exports","value","parseBackgroundImage","parseBackground","calculateBackgroundRepeatPath","calculateBackgroundPosition","calculateBackgroungPositioningArea","calculateBackgroungPaintingArea","calculateGradientBackgroundSize","calculateBackgroundSize","BACKGROUND_ORIGIN","BACKGROUND_CLIP","BACKGROUND_SIZE","BACKGROUND_REPEAT","undefined","_Color","require","_Color2","_interopRequireDefault","_Length","_Length2","_Size","_Size2","_Vector","_Vector2","_Bounds","_padding","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","REPEAT","NO_REPEAT","REPEAT_X","REPEAT_Y","AUTO","CONTAIN","COVER","LENGTH","BORDER_BOX","PADDING_BOX","CONTENT_BOX","BackgroundSize","size","backgroundImage","image","bounds","width","height","targetRatio","currentRatio","getAbsoluteValue","AUTO_SIZE","curves","clip","calculateBorderBoxPath","calculatePaddingBoxPath","backgroundOrigin","padding","border","paddingBox","calculatePaddingBox","paddingLeft","PADDING_SIDES","LEFT","paddingRight","RIGHT","paddingTop","TOP","paddingBottom","BOTTOM","Bounds","left","top","position","background","backgroundPositioningArea","repeat","Math","round","y","x","style","resourceLoader","backgroundColor","parseBackgroundImages","backgroundClip","parseBackgroundClip","parseBackgroundOrigin","parseBackgroundRepeat","backgroundRepeat","trim","process","env","NODE_ENV","console","error","sources","map","method","key","loadImage","args","positions","backgroundPosition","split","repeats","sizes","backgroundSize","source","index","parseBackgroundSize","parseBackgoundPosition","length","whitespace","results","quote","definition","mode","numParen","appendResult","prefix","substr","push","prefix_i","indexOf","toLowerCase","forEach","c","test","match"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.parseBackgroundImage = exports.parseBackground = exports.calculateBackgroundRepeatPath = exports.calculateBackgroundPosition = exports.calculateBackgroungPositioningArea = exports.calculateBackgroungPaintingArea = exports.calculateGradientBackgroundSize = exports.calculateBackgroundSize = exports.BACKGROUND_ORIGIN = exports.BACKGROUND_CLIP = exports.BACKGROUND_SIZE = exports.BACKGROUND_REPEAT = undefined;\n\nvar _Color = require('../Color');\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nvar _Length = require('../Length');\n\nvar _Length2 = _interopRequireDefault(_Length);\n\nvar _Size = require('../drawing/Size');\n\nvar _Size2 = _interopRequireDefault(_Size);\n\nvar _Vector = require('../drawing/Vector');\n\nvar _Vector2 = _interopRequireDefault(_Vector);\n\nvar _Bounds = require('../Bounds');\n\nvar _padding = require('./padding');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar BACKGROUND_REPEAT = exports.BACKGROUND_REPEAT = {\n    REPEAT: 0,\n    NO_REPEAT: 1,\n    REPEAT_X: 2,\n    REPEAT_Y: 3\n};\n\nvar BACKGROUND_SIZE = exports.BACKGROUND_SIZE = {\n    AUTO: 0,\n    CONTAIN: 1,\n    COVER: 2,\n    LENGTH: 3\n};\n\nvar BACKGROUND_CLIP = exports.BACKGROUND_CLIP = {\n    BORDER_BOX: 0,\n    PADDING_BOX: 1,\n    CONTENT_BOX: 2\n};\n\nvar BACKGROUND_ORIGIN = exports.BACKGROUND_ORIGIN = BACKGROUND_CLIP;\n\nvar AUTO = 'auto';\n\nvar BackgroundSize = function BackgroundSize(size) {\n    _classCallCheck(this, BackgroundSize);\n\n    switch (size) {\n        case 'contain':\n            this.size = BACKGROUND_SIZE.CONTAIN;\n            break;\n        case 'cover':\n            this.size = BACKGROUND_SIZE.COVER;\n            break;\n        case 'auto':\n            this.size = BACKGROUND_SIZE.AUTO;\n            break;\n        default:\n            this.value = new _Length2.default(size);\n    }\n};\n\nvar calculateBackgroundSize = exports.calculateBackgroundSize = function calculateBackgroundSize(backgroundImage, image, bounds) {\n    var width = 0;\n    var height = 0;\n    var size = backgroundImage.size;\n    if (size[0].size === BACKGROUND_SIZE.CONTAIN || size[0].size === BACKGROUND_SIZE.COVER) {\n        var targetRatio = bounds.width / bounds.height;\n        var currentRatio = image.width / image.height;\n        return targetRatio < currentRatio !== (size[0].size === BACKGROUND_SIZE.COVER) ? new _Size2.default(bounds.width, bounds.width / currentRatio) : new _Size2.default(bounds.height * currentRatio, bounds.height);\n    }\n\n    if (size[0].value) {\n        width = size[0].value.getAbsoluteValue(bounds.width);\n    }\n\n    if (size[0].size === BACKGROUND_SIZE.AUTO && size[1].size === BACKGROUND_SIZE.AUTO) {\n        height = image.height;\n    } else if (size[1].size === BACKGROUND_SIZE.AUTO) {\n        height = width / image.width * image.height;\n    } else if (size[1].value) {\n        height = size[1].value.getAbsoluteValue(bounds.height);\n    }\n\n    if (size[0].size === BACKGROUND_SIZE.AUTO) {\n        width = height / image.height * image.width;\n    }\n\n    return new _Size2.default(width, height);\n};\n\nvar calculateGradientBackgroundSize = exports.calculateGradientBackgroundSize = function calculateGradientBackgroundSize(backgroundImage, bounds) {\n    var size = backgroundImage.size;\n    var width = size[0].value ? size[0].value.getAbsoluteValue(bounds.width) : bounds.width;\n    var height = size[1].value ? size[1].value.getAbsoluteValue(bounds.height) : size[0].value ? width : bounds.height;\n\n    return new _Size2.default(width, height);\n};\n\nvar AUTO_SIZE = new BackgroundSize(AUTO);\n\nvar calculateBackgroungPaintingArea = exports.calculateBackgroungPaintingArea = function calculateBackgroungPaintingArea(curves, clip) {\n    switch (clip) {\n        case BACKGROUND_CLIP.BORDER_BOX:\n            return (0, _Bounds.calculateBorderBoxPath)(curves);\n        case BACKGROUND_CLIP.PADDING_BOX:\n        default:\n            return (0, _Bounds.calculatePaddingBoxPath)(curves);\n    }\n};\n\nvar calculateBackgroungPositioningArea = exports.calculateBackgroungPositioningArea = function calculateBackgroungPositioningArea(backgroundOrigin, bounds, padding, border) {\n    var paddingBox = (0, _Bounds.calculatePaddingBox)(bounds, border);\n\n    switch (backgroundOrigin) {\n        case BACKGROUND_ORIGIN.BORDER_BOX:\n            return bounds;\n        case BACKGROUND_ORIGIN.CONTENT_BOX:\n            var paddingLeft = padding[_padding.PADDING_SIDES.LEFT].getAbsoluteValue(bounds.width);\n            var paddingRight = padding[_padding.PADDING_SIDES.RIGHT].getAbsoluteValue(bounds.width);\n            var paddingTop = padding[_padding.PADDING_SIDES.TOP].getAbsoluteValue(bounds.width);\n            var paddingBottom = padding[_padding.PADDING_SIDES.BOTTOM].getAbsoluteValue(bounds.width);\n            return new _Bounds.Bounds(paddingBox.left + paddingLeft, paddingBox.top + paddingTop, paddingBox.width - paddingLeft - paddingRight, paddingBox.height - paddingTop - paddingBottom);\n        case BACKGROUND_ORIGIN.PADDING_BOX:\n        default:\n            return paddingBox;\n    }\n};\n\nvar calculateBackgroundPosition = exports.calculateBackgroundPosition = function calculateBackgroundPosition(position, size, bounds) {\n    return new _Vector2.default(position[0].getAbsoluteValue(bounds.width - size.width), position[1].getAbsoluteValue(bounds.height - size.height));\n};\n\nvar calculateBackgroundRepeatPath = exports.calculateBackgroundRepeatPath = function calculateBackgroundRepeatPath(background, position, size, backgroundPositioningArea, bounds) {\n    var repeat = background.repeat;\n    switch (repeat) {\n        case BACKGROUND_REPEAT.REPEAT_X:\n            return [new _Vector2.default(Math.round(bounds.left), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(size.height + backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(bounds.left), Math.round(size.height + backgroundPositioningArea.top + position.y))];\n        case BACKGROUND_REPEAT.REPEAT_Y:\n            return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(bounds.height + bounds.top))];\n        case BACKGROUND_REPEAT.NO_REPEAT:\n            return [new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x + size.width), Math.round(backgroundPositioningArea.top + position.y + size.height)), new _Vector2.default(Math.round(backgroundPositioningArea.left + position.x), Math.round(backgroundPositioningArea.top + position.y + size.height))];\n        default:\n            return [new _Vector2.default(Math.round(bounds.left), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.top)), new _Vector2.default(Math.round(bounds.left + bounds.width), Math.round(bounds.height + bounds.top)), new _Vector2.default(Math.round(bounds.left), Math.round(bounds.height + bounds.top))];\n    }\n};\n\nvar parseBackground = exports.parseBackground = function parseBackground(style, resourceLoader) {\n    return {\n        backgroundColor: new _Color2.default(style.backgroundColor),\n        backgroundImage: parseBackgroundImages(style, resourceLoader),\n        backgroundClip: parseBackgroundClip(style.backgroundClip),\n        backgroundOrigin: parseBackgroundOrigin(style.backgroundOrigin)\n    };\n};\n\nvar parseBackgroundClip = function parseBackgroundClip(backgroundClip) {\n    switch (backgroundClip) {\n        case 'padding-box':\n            return BACKGROUND_CLIP.PADDING_BOX;\n        case 'content-box':\n            return BACKGROUND_CLIP.CONTENT_BOX;\n    }\n    return BACKGROUND_CLIP.BORDER_BOX;\n};\n\nvar parseBackgroundOrigin = function parseBackgroundOrigin(backgroundOrigin) {\n    switch (backgroundOrigin) {\n        case 'padding-box':\n            return BACKGROUND_ORIGIN.PADDING_BOX;\n        case 'content-box':\n            return BACKGROUND_ORIGIN.CONTENT_BOX;\n    }\n    return BACKGROUND_ORIGIN.BORDER_BOX;\n};\n\nvar parseBackgroundRepeat = function parseBackgroundRepeat(backgroundRepeat) {\n    switch (backgroundRepeat.trim()) {\n        case 'no-repeat':\n            return BACKGROUND_REPEAT.NO_REPEAT;\n        case 'repeat-x':\n        case 'repeat no-repeat':\n            return BACKGROUND_REPEAT.REPEAT_X;\n        case 'repeat-y':\n        case 'no-repeat repeat':\n            return BACKGROUND_REPEAT.REPEAT_Y;\n        case 'repeat':\n            return BACKGROUND_REPEAT.REPEAT;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n        console.error('Invalid background-repeat value \"' + backgroundRepeat + '\"');\n    }\n\n    return BACKGROUND_REPEAT.REPEAT;\n};\n\nvar parseBackgroundImages = function parseBackgroundImages(style, resourceLoader) {\n    var sources = parseBackgroundImage(style.backgroundImage).map(function (backgroundImage) {\n        if (backgroundImage.method === 'url') {\n            var key = resourceLoader.loadImage(backgroundImage.args[0]);\n            backgroundImage.args = key ? [key] : [];\n        }\n        return backgroundImage;\n    });\n    var positions = style.backgroundPosition.split(',');\n    var repeats = style.backgroundRepeat.split(',');\n    var sizes = style.backgroundSize.split(',');\n\n    return sources.map(function (source, index) {\n        var size = (sizes[index] || AUTO).trim().split(' ').map(parseBackgroundSize);\n        var position = (positions[index] || AUTO).trim().split(' ').map(parseBackgoundPosition);\n\n        return {\n            source: source,\n            repeat: parseBackgroundRepeat(typeof repeats[index] === 'string' ? repeats[index] : repeats[0]),\n            size: size.length < 2 ? [size[0], AUTO_SIZE] : [size[0], size[1]],\n            position: position.length < 2 ? [position[0], position[0]] : [position[0], position[1]]\n        };\n    });\n};\n\nvar parseBackgroundSize = function parseBackgroundSize(size) {\n    return size === 'auto' ? AUTO_SIZE : new BackgroundSize(size);\n};\n\nvar parseBackgoundPosition = function parseBackgoundPosition(position) {\n    switch (position) {\n        case 'bottom':\n        case 'right':\n            return new _Length2.default('100%');\n        case 'left':\n        case 'top':\n            return new _Length2.default('0%');\n        case 'auto':\n            return new _Length2.default('0');\n    }\n    return new _Length2.default(position);\n};\n\nvar parseBackgroundImage = exports.parseBackgroundImage = function parseBackgroundImage(image) {\n    var whitespace = /^\\s$/;\n    var results = [];\n\n    var args = [];\n    var method = '';\n    var quote = null;\n    var definition = '';\n    var mode = 0;\n    var numParen = 0;\n\n    var appendResult = function appendResult() {\n        var prefix = '';\n        if (method) {\n            if (definition.substr(0, 1) === '\"') {\n                definition = definition.substr(1, definition.length - 2);\n            }\n\n            if (definition) {\n                args.push(definition.trim());\n            }\n\n            var prefix_i = method.indexOf('-', 1) + 1;\n            if (method.substr(0, 1) === '-' && prefix_i > 0) {\n                prefix = method.substr(0, prefix_i).toLowerCase();\n                method = method.substr(prefix_i);\n            }\n            method = method.toLowerCase();\n            if (method !== 'none') {\n                results.push({\n                    prefix: prefix,\n                    method: method,\n                    args: args\n                });\n            }\n        }\n        args = [];\n        method = definition = '';\n    };\n\n    image.split('').forEach(function (c) {\n        if (mode === 0 && whitespace.test(c)) {\n            return;\n        }\n        switch (c) {\n            case '\"':\n                if (!quote) {\n                    quote = c;\n                } else if (quote === c) {\n                    quote = null;\n                }\n                break;\n            case '(':\n                if (quote) {\n                    break;\n                } else if (mode === 0) {\n                    mode = 1;\n                    return;\n                } else {\n                    numParen++;\n                }\n                break;\n            case ')':\n                if (quote) {\n                    break;\n                } else if (mode === 1) {\n                    if (numParen === 0) {\n                        mode = 0;\n                        appendResult();\n                        return;\n                    } else {\n                        numParen--;\n                    }\n                }\n                break;\n\n            case ',':\n                if (quote) {\n                    break;\n                } else if (mode === 0) {\n                    appendResult();\n                    return;\n                } else if (mode === 1) {\n                    if (numParen === 0 && !method.match(/^url$/i)) {\n                        args.push(definition.trim());\n                        definition = '';\n                        return;\n                    }\n                }\n                break;\n        }\n\n        if (mode === 0) {\n            method += c;\n        } else {\n            definition += c;\n        }\n    });\n\n    appendResult();\n    return results;\n};"]},"metadata":{},"sourceType":"script"}