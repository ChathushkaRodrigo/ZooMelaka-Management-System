{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderElement = undefined;\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _Logger = require('./Logger');\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _NodeParser = require('./NodeParser');\n\nvar _Renderer = require('./Renderer');\n\nvar _Renderer2 = _interopRequireDefault(_Renderer);\n\nvar _ForeignObjectRenderer = require('./renderer/ForeignObjectRenderer');\n\nvar _ForeignObjectRenderer2 = _interopRequireDefault(_ForeignObjectRenderer);\n\nvar _Feature = require('./Feature');\n\nvar _Feature2 = _interopRequireDefault(_Feature);\n\nvar _Bounds = require('./Bounds');\n\nvar _Clone = require('./Clone');\n\nvar _Font = require('./Font');\n\nvar _Color = require('./Color');\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar renderElement = exports.renderElement = function renderElement(element, options, logger) {\n  var ownerDocument = element.ownerDocument;\n  var windowBounds = new _Bounds.Bounds(options.scrollX, options.scrollY, options.windowWidth, options.windowHeight); // http://www.w3.org/TR/css3-background/#special-backgrounds\n\n  var documentBackgroundColor = ownerDocument.documentElement ? new _Color2.default(getComputedStyle(ownerDocument.documentElement).backgroundColor) : _Color.TRANSPARENT;\n  var bodyBackgroundColor = ownerDocument.body ? new _Color2.default(getComputedStyle(ownerDocument.body).backgroundColor) : _Color.TRANSPARENT;\n  var backgroundColor = element === ownerDocument.documentElement ? documentBackgroundColor.isTransparent() ? bodyBackgroundColor.isTransparent() ? options.backgroundColor ? new _Color2.default(options.backgroundColor) : null : bodyBackgroundColor : documentBackgroundColor : options.backgroundColor ? new _Color2.default(options.backgroundColor) : null;\n  return (options.foreignObjectRendering ? // $FlowFixMe\n  _Feature2.default.SUPPORT_FOREIGNOBJECT_DRAWING : Promise.resolve(false)).then(function (supportForeignObject) {\n    return supportForeignObject ? function (cloner) {\n      if (process.env.NODE_ENV !== 'production') {\n        logger.log('Document cloned, using foreignObject rendering');\n      }\n\n      return cloner.inlineFonts(ownerDocument).then(function () {\n        return cloner.resourceLoader.ready();\n      }).then(function () {\n        var renderer = new _ForeignObjectRenderer2.default(cloner.documentElement);\n        var defaultView = ownerDocument.defaultView;\n        var scrollX = defaultView.pageXOffset;\n        var scrollY = defaultView.pageYOffset;\n        var isDocument = element.tagName === 'HTML' || element.tagName === 'BODY';\n\n        var _ref = isDocument ? (0, _Bounds.parseDocumentSize)(ownerDocument) : (0, _Bounds.parseBounds)(element, scrollX, scrollY),\n            width = _ref.width,\n            height = _ref.height,\n            left = _ref.left,\n            top = _ref.top;\n\n        return renderer.render({\n          backgroundColor: backgroundColor,\n          logger: logger,\n          scale: options.scale,\n          x: typeof options.x === 'number' ? options.x : left,\n          y: typeof options.y === 'number' ? options.y : top,\n          width: typeof options.width === 'number' ? options.width : Math.ceil(width),\n          height: typeof options.height === 'number' ? options.height : Math.ceil(height),\n          windowWidth: options.windowWidth,\n          windowHeight: options.windowHeight,\n          scrollX: options.scrollX,\n          scrollY: options.scrollY\n        });\n      });\n    }(new _Clone.DocumentCloner(element, options, logger, true, renderElement)) : (0, _Clone.cloneWindow)(ownerDocument, windowBounds, element, options, logger, renderElement).then(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 3),\n          container = _ref3[0],\n          clonedElement = _ref3[1],\n          resourceLoader = _ref3[2];\n\n      if (process.env.NODE_ENV !== 'production') {\n        logger.log('Document cloned, using computed rendering');\n      }\n\n      var stack = (0, _NodeParser.NodeParser)(clonedElement, resourceLoader, logger);\n      var clonedDocument = clonedElement.ownerDocument;\n\n      if (backgroundColor === stack.container.style.background.backgroundColor) {\n        stack.container.style.background.backgroundColor = _Color.TRANSPARENT;\n      }\n\n      return resourceLoader.ready().then(function (imageStore) {\n        var fontMetrics = new _Font.FontMetrics(clonedDocument);\n\n        if (process.env.NODE_ENV !== 'production') {\n          logger.log('Starting renderer');\n        }\n\n        var defaultView = clonedDocument.defaultView;\n        var scrollX = defaultView.pageXOffset;\n        var scrollY = defaultView.pageYOffset;\n        var isDocument = clonedElement.tagName === 'HTML' || clonedElement.tagName === 'BODY';\n\n        var _ref4 = isDocument ? (0, _Bounds.parseDocumentSize)(ownerDocument) : (0, _Bounds.parseBounds)(clonedElement, scrollX, scrollY),\n            width = _ref4.width,\n            height = _ref4.height,\n            left = _ref4.left,\n            top = _ref4.top;\n\n        var renderOptions = {\n          backgroundColor: backgroundColor,\n          fontMetrics: fontMetrics,\n          imageStore: imageStore,\n          logger: logger,\n          scale: options.scale,\n          x: typeof options.x === 'number' ? options.x : left,\n          y: typeof options.y === 'number' ? options.y : top,\n          width: typeof options.width === 'number' ? options.width : Math.ceil(width),\n          height: typeof options.height === 'number' ? options.height : Math.ceil(height)\n        };\n\n        if (Array.isArray(options.target)) {\n          return Promise.all(options.target.map(function (target) {\n            var renderer = new _Renderer2.default(target, renderOptions);\n            return renderer.render(stack);\n          }));\n        } else {\n          var renderer = new _Renderer2.default(options.target, renderOptions);\n          var canvas = renderer.render(stack);\n\n          if (options.removeContainer === true) {\n            if (container.parentNode) {\n              container.parentNode.removeChild(container);\n            } else if (process.env.NODE_ENV !== 'production') {\n              logger.log('Cannot detach cloned iframe as it is not in the DOM anymore');\n            }\n          }\n\n          return canvas;\n        }\n      });\n    });\n  });\n};","map":{"version":3,"sources":["/Users/ChathushkaRodrigo/Desktop/ITP Project/ZooMelaka-Management-System/frontend/node_modules/react-to-pdf/node_modules/html2canvas/dist/npm/Window.js"],"names":["Object","defineProperty","exports","value","renderElement","undefined","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","push","length","err","Array","isArray","TypeError","_Logger","require","_Logger2","_interopRequireDefault","_NodeParser","_Renderer","_Renderer2","_ForeignObjectRenderer","_ForeignObjectRenderer2","_Feature","_Feature2","_Bounds","_Clone","_Font","_Color","_Color2","obj","__esModule","default","element","options","logger","ownerDocument","windowBounds","Bounds","scrollX","scrollY","windowWidth","windowHeight","documentBackgroundColor","documentElement","getComputedStyle","backgroundColor","TRANSPARENT","bodyBackgroundColor","body","isTransparent","foreignObjectRendering","SUPPORT_FOREIGNOBJECT_DRAWING","Promise","resolve","then","supportForeignObject","cloner","process","env","NODE_ENV","log","inlineFonts","resourceLoader","ready","renderer","defaultView","pageXOffset","pageYOffset","isDocument","tagName","_ref","parseDocumentSize","parseBounds","width","height","left","top","render","scale","x","y","Math","ceil","DocumentCloner","cloneWindow","_ref2","_ref3","container","clonedElement","stack","NodeParser","clonedDocument","style","background","imageStore","fontMetrics","FontMetrics","_ref4","renderOptions","target","all","map","canvas","removeContainer","parentNode","removeChild"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.renderElement = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _Logger = require('./Logger');\n\nvar _Logger2 = _interopRequireDefault(_Logger);\n\nvar _NodeParser = require('./NodeParser');\n\nvar _Renderer = require('./Renderer');\n\nvar _Renderer2 = _interopRequireDefault(_Renderer);\n\nvar _ForeignObjectRenderer = require('./renderer/ForeignObjectRenderer');\n\nvar _ForeignObjectRenderer2 = _interopRequireDefault(_ForeignObjectRenderer);\n\nvar _Feature = require('./Feature');\n\nvar _Feature2 = _interopRequireDefault(_Feature);\n\nvar _Bounds = require('./Bounds');\n\nvar _Clone = require('./Clone');\n\nvar _Font = require('./Font');\n\nvar _Color = require('./Color');\n\nvar _Color2 = _interopRequireDefault(_Color);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar renderElement = exports.renderElement = function renderElement(element, options, logger) {\n    var ownerDocument = element.ownerDocument;\n\n    var windowBounds = new _Bounds.Bounds(options.scrollX, options.scrollY, options.windowWidth, options.windowHeight);\n\n    // http://www.w3.org/TR/css3-background/#special-backgrounds\n    var documentBackgroundColor = ownerDocument.documentElement ? new _Color2.default(getComputedStyle(ownerDocument.documentElement).backgroundColor) : _Color.TRANSPARENT;\n    var bodyBackgroundColor = ownerDocument.body ? new _Color2.default(getComputedStyle(ownerDocument.body).backgroundColor) : _Color.TRANSPARENT;\n\n    var backgroundColor = element === ownerDocument.documentElement ? documentBackgroundColor.isTransparent() ? bodyBackgroundColor.isTransparent() ? options.backgroundColor ? new _Color2.default(options.backgroundColor) : null : bodyBackgroundColor : documentBackgroundColor : options.backgroundColor ? new _Color2.default(options.backgroundColor) : null;\n\n    return (options.foreignObjectRendering ? // $FlowFixMe\n    _Feature2.default.SUPPORT_FOREIGNOBJECT_DRAWING : Promise.resolve(false)).then(function (supportForeignObject) {\n        return supportForeignObject ? function (cloner) {\n            if (process.env.NODE_ENV !== 'production') {\n                logger.log('Document cloned, using foreignObject rendering');\n            }\n\n            return cloner.inlineFonts(ownerDocument).then(function () {\n                return cloner.resourceLoader.ready();\n            }).then(function () {\n                var renderer = new _ForeignObjectRenderer2.default(cloner.documentElement);\n\n                var defaultView = ownerDocument.defaultView;\n                var scrollX = defaultView.pageXOffset;\n                var scrollY = defaultView.pageYOffset;\n\n                var isDocument = element.tagName === 'HTML' || element.tagName === 'BODY';\n\n                var _ref = isDocument ? (0, _Bounds.parseDocumentSize)(ownerDocument) : (0, _Bounds.parseBounds)(element, scrollX, scrollY),\n                    width = _ref.width,\n                    height = _ref.height,\n                    left = _ref.left,\n                    top = _ref.top;\n\n                return renderer.render({\n                    backgroundColor: backgroundColor,\n                    logger: logger,\n                    scale: options.scale,\n                    x: typeof options.x === 'number' ? options.x : left,\n                    y: typeof options.y === 'number' ? options.y : top,\n                    width: typeof options.width === 'number' ? options.width : Math.ceil(width),\n                    height: typeof options.height === 'number' ? options.height : Math.ceil(height),\n                    windowWidth: options.windowWidth,\n                    windowHeight: options.windowHeight,\n                    scrollX: options.scrollX,\n                    scrollY: options.scrollY\n                });\n            });\n        }(new _Clone.DocumentCloner(element, options, logger, true, renderElement)) : (0, _Clone.cloneWindow)(ownerDocument, windowBounds, element, options, logger, renderElement).then(function (_ref2) {\n            var _ref3 = _slicedToArray(_ref2, 3),\n                container = _ref3[0],\n                clonedElement = _ref3[1],\n                resourceLoader = _ref3[2];\n\n            if (process.env.NODE_ENV !== 'production') {\n                logger.log('Document cloned, using computed rendering');\n            }\n\n            var stack = (0, _NodeParser.NodeParser)(clonedElement, resourceLoader, logger);\n            var clonedDocument = clonedElement.ownerDocument;\n\n            if (backgroundColor === stack.container.style.background.backgroundColor) {\n                stack.container.style.background.backgroundColor = _Color.TRANSPARENT;\n            }\n\n            return resourceLoader.ready().then(function (imageStore) {\n                var fontMetrics = new _Font.FontMetrics(clonedDocument);\n                if (process.env.NODE_ENV !== 'production') {\n                    logger.log('Starting renderer');\n                }\n\n                var defaultView = clonedDocument.defaultView;\n                var scrollX = defaultView.pageXOffset;\n                var scrollY = defaultView.pageYOffset;\n\n                var isDocument = clonedElement.tagName === 'HTML' || clonedElement.tagName === 'BODY';\n\n                var _ref4 = isDocument ? (0, _Bounds.parseDocumentSize)(ownerDocument) : (0, _Bounds.parseBounds)(clonedElement, scrollX, scrollY),\n                    width = _ref4.width,\n                    height = _ref4.height,\n                    left = _ref4.left,\n                    top = _ref4.top;\n\n                var renderOptions = {\n                    backgroundColor: backgroundColor,\n                    fontMetrics: fontMetrics,\n                    imageStore: imageStore,\n                    logger: logger,\n                    scale: options.scale,\n                    x: typeof options.x === 'number' ? options.x : left,\n                    y: typeof options.y === 'number' ? options.y : top,\n                    width: typeof options.width === 'number' ? options.width : Math.ceil(width),\n                    height: typeof options.height === 'number' ? options.height : Math.ceil(height)\n                };\n\n                if (Array.isArray(options.target)) {\n                    return Promise.all(options.target.map(function (target) {\n                        var renderer = new _Renderer2.default(target, renderOptions);\n                        return renderer.render(stack);\n                    }));\n                } else {\n                    var renderer = new _Renderer2.default(options.target, renderOptions);\n                    var canvas = renderer.render(stack);\n                    if (options.removeContainer === true) {\n                        if (container.parentNode) {\n                            container.parentNode.removeChild(container);\n                        } else if (process.env.NODE_ENV !== 'production') {\n                            logger.log('Cannot detach cloned iframe as it is not in the DOM anymore');\n                        }\n                    }\n\n                    return canvas;\n                }\n            });\n        });\n    });\n};"]},"metadata":{},"sourceType":"script"}